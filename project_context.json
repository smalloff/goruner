{
  "prompt": "",
  "os": "windows",
  "cwd": "D:\\MYREPA\\goruner",
  "source_code": [
    {
      "path": "frontend/src/App.vue",
      "content": "<template>\n  <el-container class=\"app-container\">\n    <el-header height=\"40px\" class=\"header-tabs\">\n      <el-tabs v-model=\"activeTab\">\n        <el-tab-pane :label=\"t('console')\" name=\"console\" />\n        <el-tab-pane :label=\"t('settings')\" name=\"settings\" />\n      </el-tabs>\n    </el-header>\n\n    <el-main v-if=\"activeTab === 'console'\" class=\"console-view\">\n      <div class=\"console-wrapper\">\n        <div class=\"console-output\" ref=\"consoleRef\">\n          <div v-for=\"(line, index) in formattedOutput\" :key=\"index\" :class=\"line.type\" class=\"console-line\">\n            <span>{{ line.text }}</span>\n            <el-button \n              v-if=\"line.text.includes(t('errorsLabel'))\" \n              class=\"inline-copy-btn\"\n              type=\"danger\" \n              size=\"small\" \n              circle\n              @click.stop=\"copyErrors\"\n              :title=\"t('copyTip')\"\n            >\n              <template #icon>\n                <svg viewBox=\"0 0 1024 1024\" width=\"15\" height=\"15\">\n                  <path fill=\"currentColor\" d=\"M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128h64v-64a128 128 0 0 1 128-128h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128h-64v64zM384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64H384zm-192 192a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64v-64H384a128 128 0 0 1-128-128V320h-64z\"></path>\n                </svg>\n              </template>\n            </el-button>\n          </div>\n        </div>\n      </div>\n      <div class=\"controls-footer\">\n        <div class=\"controls\">\n          <el-button class=\"icon-btn restart\" @click=\"runTests\" :loading=\"loading\" :title=\"t('restartTip')\">\n            <template #icon>\n              <svg viewBox=\"0 0 1024 1024\" width=\"22\" height=\"22\">\n                <path fill=\"currentColor\" d=\"M224 416h192a32 32 0 0 0 0-64H306.432A352.064 352.064 0 0 1 896 512c0 194.4-157.6 352-352 352a351.488 351.488 0 0 1-295.552-160.896 32 32 0 0 0-54.656 33.152A415.488 415.488 0 0 0 544 928c229.76 0 416-186.24 416-416S773.76 96 544 96c-184.256 0-341.312 119.744-397.632 286.336V224a32 32 0 0 0-64 0v192a32 32 0 0 0 32 32h109.632z\" style=\"stroke-width: 40px; stroke: currentColor;\"></path>\n              </svg>\n            </template>\n          </el-button>\n          \n          <el-button class=\"icon-btn toggle\" :class=\"{ 'is-paused': isPaused }\" @click=\"togglePause\" :title=\"isPaused ? t('resumeTip') : t('pauseTip')\">\n            <template #icon>\n              <svg v-if=\"!isPaused\" viewBox=\"0 0 1024 1024\" width=\"22\" height=\"22\">\n                <rect x=\"256\" y=\"160\" width=\"160\" height=\"704\" rx=\"40\" fill=\"currentColor\" />\n                <rect x=\"608\" y=\"160\" width=\"160\" height=\"704\" rx=\"40\" fill=\"currentColor\" />\n              </svg>\n              <svg v-else viewBox=\"0 0 1024 1024\" width=\"22\" height=\"22\">\n                <path fill=\"currentColor\" d=\"M256 160l576 352-576 352z\" style=\"stroke-width: 40px; stroke: currentColor; stroke-linejoin: round;\"></path>\n              </svg>\n            </template>\n          </el-button>\n\n          <el-button class=\"icon-btn lang-btn\" @click=\"toggleLang\" :title=\"t('langTip')\">\n            <span class=\"lang-label\">{{ (config.lang || 'ru').toUpperCase() }}</span>\n          </el-button>\n        </div>\n      </div>\n    </el-main>\n\n    <el-main v-if=\"activeTab === 'settings'\" class=\"settings-view\">\n      <el-form :model=\"config\" label-position=\"top\" class=\"settings-form\">\n        <el-form-item :label=\"t('exclusionsLabel')\">\n          <el-input type=\"textarea\" v-model=\"exclusionText\" rows=\"4\" />\n        </el-form-item>\n        <el-form-item>\n          <el-checkbox v-model=\"config.show_passed\">{{ t('showPassed') }}</el-checkbox>\n        </el-form-item>\n        <el-form-item>\n          <el-checkbox v-model=\"config.auto_watch\">{{ t('autoWatch') }}</el-checkbox>\n        </el-form-item>\n        <el-form-item>\n          <el-checkbox v-model=\"config.show_notifications\">{{ t('showNotifications') }}</el-checkbox>\n        </el-form-item>\n        <el-form-item v-if=\"config.show_notifications\" style=\"margin-left: 20px;\">\n          <el-checkbox v-model=\"config.notify_only_on_failure\">{{ t('notifyOnlyOnFailure') }}</el-checkbox>\n        </el-form-item>\n        <el-form-item>\n          <el-checkbox v-model=\"config.always_on_top\">{{ t('alwaysOnTop') }}</el-checkbox>\n        </el-form-item>\n        <el-form-item>\n          <el-checkbox v-model=\"config.auto_copy_errors\">{{ t('autoCopyErrors') }}</el-checkbox>\n        </el-form-item>\n        <el-button type=\"success\" @click=\"saveSettings\">{{ t('saveBtn') }}</el-button>\n      </el-form>\n    </el-main>\n  </el-container>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed, watch, nextTick } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport { EventsOn, ClipboardSetText } from '../wailsjs/runtime/runtime'\nimport { RunTests, TogglePause, GetConfig, SaveConfig } from '../wailsjs/go/main/App'\n\nconst activeTab = ref('console')\nconst output = ref('')\nconst loading = ref(false)\nconst isPaused = ref(false)\nconst config = ref({\n  exclusions: [],\n  show_passed: true,\n  auto_watch: true,\n  show_notifications: true,\n  notify_only_on_failure: false,\n  always_on_top: false,\n  minimize_to_tray: false,\n  auto_copy_errors: false,\n  lang: 'ru'\n})\nconst exclusionText = ref('')\nconst consoleRef = ref(null)\n\nconst i18n = {\n  ru: {\n    console: 'Консоль', settings: 'Настройки', errorsLabel: 'Ошибки в тестах:', successLabel: 'Успешные тесты:',\n    copyTip: 'Скопировать ошибки', restartTip: 'Перезапустить тесты', resumeTip: 'Возобновить', pauseTip: 'Пауза',\n    langTip: 'Сменить язык', exclusionsLabel: 'Исключения (по одному в строке)', showPassed: 'Показывать успешные тесты',\n    autoWatch: 'Автоматически перезапускать тесты', showNotifications: 'Показывать уведомления', notifyOnlyOnFailure: 'Только при ошибках', \n    alwaysOnTop: 'Поверх всех окон', autoCopyErrors: 'Автокопирование ошибок', saveBtn: 'Сохранить настройки', copied: 'Ошибки скопированы в буфер',\n      running: 'Запуск тестов...', waiting: 'Ожидание изменений...'\n    },\n    en: {\n      console: 'Console', settings: 'Settings', errorsLabel: 'Errors in tests:', successLabel: 'Successful tests:',\n      copyTip: 'Copy errors', restartTip: 'Restart tests', resumeTip: 'Resume', pauseTip: 'Pause',\n      langTip: 'Change language', exclusionsLabel: 'Exclusions (one per line)', showPassed: 'Show successful tests',\n      autoWatch: 'Automatically restart tests', showNotifications: 'Show notifications', notifyOnlyOnFailure: 'Only on failure', \n      alwaysOnTop: 'Always on Top', autoCopyErrors: 'Auto-copy Errors', saveBtn: 'Save Settings', copied: 'Errors copied to clipboard',\n      running: 'Running tests...', waiting: 'Waiting for changes...'\n    }\n};\n\nconst t = (key) => i18n[config.value.lang || 'en'][key];\n\nconst toggleLang = async () => {\n  const isWaiting = output.value === t('waiting');\n  config.value.lang = config.value.lang === 'ru' ? 'en' : 'ru';\n  await SaveConfig(config.value);\n  if (isWaiting) {\n    output.value = t('waiting');\n  } else if (output.value && !output.value.includes('Waiting') && !output.value.includes('Ожидание')) {\n    runTests();\n  }\n};\n\nconst formattedOutput = computed(() => {\n  let inErrorSection = false;\n  const errMarker = t('errorsLabel');\n  const successMarker = t('successLabel');\n\n  return output.value.split('\\n').map(line => {\n    if (line.includes(errMarker)) inErrorSection = true;\n    if (line.includes(successMarker)) inErrorSection = false;\n  \n    const trimmed = line.trim();\n    let type = 'default';\n    \n    const isLog = line.includes('INFO') || line.includes('DEBUG') || line.includes('WARN');\n    const isIndented = /^\\s/.test(line);\n    const isError = !isLog && (\n                    trimmed.startsWith('#') || \n                    line.includes('FAIL') || \n                    (line.includes('.go:') && !isIndented) || \n                    line.toLowerCase().includes('error:') || \n                    line.includes('panic:') ||\n                    (inErrorSection && trimmed && !line.includes(errMarker))\n                  );\n  \n    if (isError) {\n      type = 'error-text';\n    } else if (line.includes('PASS') || line.includes('✅') || trimmed.startsWith('ok')) {\n      type = 'success-text';\n    }\n    return { text: line, type };\n  });\n});\n\nconst copyErrors = async () => {\n  const errorLines = formattedOutput.value\n    .filter(l => l.type === 'error-text' && !l.text.includes(t('errorsLabel')))\n    .map(l => l.text);\n  \n  if (errorLines.length > 0) {\n    const success = await ClipboardSetText(errorLines.join('\\n'));\n    if (success) {\n      ElMessage({ message: t('copied'), type: 'success', offset: 50 });\n    }\n  }\n};\n\nconst scrollToBottom = async () => {\n  await nextTick();\n  if (consoleRef.value) {\n    consoleRef.value.scrollTop = consoleRef.value.scrollHeight;\n  }\n};\n\nwatch(output, () => scrollToBottom());\n\nconst runTests = async () => {\n  loading.value = true\n  output.value = t('running') + \"\\n\"\n  output.value = await RunTests()\n  loading.value = false\n}\n\nconst togglePause = async () => {\n  isPaused.value = await TogglePause()\n}\n\nconst saveSettings = async () => {\n  config.value.exclusions = exclusionText.value.split('\\n').filter(s => s.trim())\n  await SaveConfig(config.value)\n}\n\nonMounted(async () => {\n  try {\n    config.value = await GetConfig()\n    output.value = t('waiting')\n    exclusionText.value = (config.value.exclusions || []).join('\\n')\n    \n    EventsOn('trigger_test', (msg) => {\n      if (!loading.value) {\n        output.value = `[${new Date().toLocaleTimeString()}] ${msg}...\\n` + output.value\n        runTests()\n      }\n    })\n  } catch (err) {\n    output.value = \"Error: \" + err\n  }\n})\n</script>\n\n<style>\nbody {\n  margin: 0;\n  background: #1e1e1e;\n  color: #d4d4d4;\n  font-family: 'Consolas', monospace;\n  overflow: hidden;\n}\n.app-container {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n}\n.console-view {\n  display: flex;\n  flex-direction: column;\n  padding: 0 !important;\n  flex: 1;\n  overflow: hidden;\n}\n.console-wrapper {\n  position: relative;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  padding: 10px 10px 0 10px;\n}\n.console-output {\n  flex: 1;\n  background: #000;\n  color: #d4d4d4;\n  padding: 15px;\n  overflow-y: auto;\n  border: 1px solid #333;\n  white-space: pre-wrap;\n  font-size: 13px;\n  line-height: 1.4;\n  scroll-behavior: smooth;\n}\n.console-line {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  min-height: 20px;\n}\n.inline-copy-btn {\n  width: 28px !important;\n  height: 28px !important;\n  min-height: 28px !important;\n  padding: 0 !important;\n  margin-left: 6px;\n  background: rgba(255, 85, 85, 0.2) !important;\n  border: 1px solid rgba(255, 85, 85, 0.6) !important;\n  color: #ff5555 !important;\n  display: inline-flex !important;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;\n  cursor: pointer;\n  box-shadow: 0 0 8px rgba(255, 85, 85, 0.4) !important;\n}\n.inline-copy-btn:hover {\n  background: #ff5555 !important;\n  border-color: #ff5555 !important;\n  transform: scale(1.15);\n  color: #000 !important;\n  box-shadow: 0 0 18px rgba(255, 85, 85, 1) !important;\n}\n.error-text {\n  color: #ff5555 !important;\n  font-weight: bold;\n}\n.success-text {\n  color: #50fa7b !important;\n}\n.default {\n  color: #888;\n}\n.controls-footer {\n  padding: 8px 12px;\n  background: #1e1e1e;\n  border-top: 1px solid #333;\n  display: flex;\n  align-items: center;\n}\n.controls {\n  display: flex;\n  gap: 2px;\n}\n.icon-btn {\n  width: 36px !important;\n  height: 36px !important;\n  padding: 0 !important;\n  border-radius: 6px !important;\n  background: #2d2d2d !important;\n  border: 1px solid #444 !important;\n  color: #aaa !important;\n  transition: all 0.2s ease;\n}\n.icon-btn:hover {\n  color: #fff !important;\n  border-color: #666 !important;\n  background: #3d3d3d !important;\n}\n.icon-btn.restart:hover {\n  color: #409eff !important;\n  box-shadow: 0 0 10px rgba(64, 158, 255, 0.3);\n}\n.icon-btn.toggle {\n  color: #e6a23c !important;\n}\n.icon-btn.toggle.is-paused {\n  color: #67c23a !important;\n}\n.icon-btn.toggle:hover {\n  box-shadow: 0 0 10px currentColor;\n}\n.lang-btn {\n  border-color: #555 !important;\n}\n.lang-label {\n  font-size: 11px;\n  font-weight: bold;\n}\n.header-tabs {\n  background: #252526;\n  border-bottom: 1px solid #333;\n}\n.el-tabs__item {\n  color: #888 !important;\n}\n.el-tabs__item.is-active {\n  color: #fff !important;\n}\n.settings-view {\n  padding: 20px !important;\n  background: #1e1e1e;\n}\n.settings-form {\n  max-width: 600px;\n}\n.settings-form .el-form-item {\n  margin-bottom: 2px;\n}\n.settings-form .el-form-item:first-child {\n  margin-bottom: 22px;\n}\n.settings-form .el-button {\n  margin-top: 12px;\n}\n</style>"
    }
  ]
}
