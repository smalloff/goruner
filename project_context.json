{
  "prompt": "Сделай профессиоанльный рефакторинг кода и комментариев. И покрой весь код тестами",
  "note": "Генерируй ответ строго в формате XML. Ты сеньор Developer, стэк go 1.24.5. Придерживайся строгой архитектуры, лучшим практикам и чистому коду. Комментарии и код оформляй профессионально. Соблюдай протокол общения в виде XML и используй инструкцию для общения.",
  "instruction": "СТРОГО ЗАПРЕЩАЕТСЯ РЕДАКТИРОВАТЬ ФАЙЛЫ, БЕЗ ПОЛНОГО ИСХОДНОГО КОДА! ИСХОДНЫЙ КОД ЗАПРОСИ В СЕКЦИИ <need_files> НАПИШИ В ДИАЛОГЕ WARNING О НЕОБХОДИМОСТИ ФАЙЛОВ. СМОТРИ ФОРМАТ ОТВЕТА!\n\nПРИНЦИПЫ ИЗМЕНЕНИЯ КОДА:\n1. Если нужно внести небольшие правки (добавить функцию, изменить условие, поправить импорты) — ИСПОЛЬЗУЙ ТЕГ <edit>. Не перезаписывай файл целиком ради пары строк!\n2. В теге <search> указывай достаточно уникального контекста (3-5 строк), чтобы блок кода был найден в файле однозначно. Код поиска, в файле должен быть уникальным!\n3. Используй тег <file> (полная перезапись) ТОЛЬКО для создания новых файлов или если меняется более 50% содержимого текущего файла.",
  "os": "windows",
  "cwd": "D:\\MYREPA\\goruner",
  "project_tree": [
    "frontend/",
    "frontend/dist/",
    "frontend/src/",
    "frontend/wailsjs/",
    "frontend/wailsjs/go/",
    "frontend/wailsjs/go/main/",
    "frontend/wailsjs/runtime/",
    "frontend/wailsjs/wailsjs/",
    "frontend/wailsjs/wailsjs/go/",
    "frontend/wailsjs/wailsjs/go/main/",
    "frontend/wailsjs/wailsjs/runtime/",
    "internal/",
    "internal/config/",
    "internal/tester/"
  ],
  "source_code": [
    {
      "path": "app.go",
      "content": "package main\n\nimport (\n\t\"context\"\n\t\"fmt\"\n\t\"goruner/internal/config\"\n\t\"goruner/internal/tester\"\n\t\"os\"\n\t\"os/exec\"\n\t\"path/filepath\"\n\t\"runtime\"\n\t\"strings\"\n\t\"sync\"\n\t\"syscall\"\n\n\t\"github.com/fsnotify/fsnotify\"\n\t\"github.com/getlantern/systray\"\n\twailsRuntime \"github.com/wailsapp/wails/v2/pkg/runtime\"\n)\n\ntype App struct {\n\tctx      context.Context\n\twatcher  *fsnotify.Watcher\n\tmu       sync.Mutex\n\tisPaused bool\n}\n\nfunc NewApp() *App {\n\treturn &App{isPaused: false}\n}\n\nfunc (a *App) startup(ctx context.Context) {\n\ta.ctx = ctx\n\ta.initWatcher()\n\n\tcfg := config.Load()\n\tif cfg.AlwaysOnTop {\n\t\twailsRuntime.WindowSetAlwaysOnTop(a.ctx, true)\n\t}\n\n\t// Запуск системного трея в отдельном потоке\n\tgo systray.Run(a.onTrayReady, a.onTrayExit)\n}\n\nfunc (a *App) initWatcher() {\n\tw, err := fsnotify.NewWatcher()\n\tif err != nil {\n\t\treturn\n\t}\n\ta.watcher = w\n\n\tgo func() {\n\t\tfor {\n\t\t\tselect {\n\t\t\tcase event, ok := <-a.watcher.Events:\n\t\t\t\tif !ok {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\ta.mu.Lock()\n\t\t\t\tpaused := a.isPaused\n\t\t\t\ta.mu.Unlock()\n\n\t\t\t\tif paused {\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\n\t\t\t\tcwd, _ := os.Getwd()\n\n\t\t\t\tif event.Op&fsnotify.Create != 0 {\n\t\t\t\t\tinfo, err := os.Stat(event.Name)\n\t\t\t\t\tif err == nil && info.IsDir() {\n\t\t\t\t\t\tcfg := config.Load()\n\t\t\t\t\t\tif !cfg.IsExcluded(event.Name, cwd) {\n\t\t\t\t\t\t\t_ = a.watcher.Add(event.Name)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif event.Op&(fsnotify.Write|fsnotify.Create|fsnotify.Rename) != 0 {\n\t\t\t\t\tcfg := config.Load()\n\t\t\t\t\tif strings.HasSuffix(strings.ToLower(event.Name), \".go\") && cfg.AutoWatch && !cfg.IsExcluded(event.Name, cwd) {\n\t\t\t\t\t\tfmt.Printf(\"[Watcher] Triggering test: %s (Op: %v)\\n\", event.Name, event.Op)\n\t\t\t\t\t\twailsRuntime.EventsEmit(a.ctx, \"trigger_test\", \"File changed: \"+filepath.Base(event.Name))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\tcase err, ok := <-a.watcher.Errors:\n\t\t\t\tif !ok {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tfmt.Printf(\"[Watcher] Error: %v\\n\", err)\n\t\t\t}\n\t\t}\n\t}()\n\n\ta.refreshWatcher()\n}\n\nfunc (a *App) refreshWatcher() {\n\tcfg := config.Load()\n\tcwd, _ := os.Getwd()\n\n\t_ = filepath.Walk(cwd, func(path string, info os.FileInfo, err error) error {\n\t\tif err != nil || !info.IsDir() {\n\t\t\treturn nil\n\t\t}\n\t\tif cfg.IsExcluded(path, cwd) {\n\t\t\treturn filepath.SkipDir\n\t\t}\n\t\t_ = a.watcher.Add(path)\n\t\treturn nil\n\t})\n}\n\nfunc (a *App) RunTests() string {\n\tcfg := config.Load()\n\tcwd, _ := os.Getwd()\n\tout, err := tester.RunTests(a.ctx, cwd, cfg.ShowPassed, cfg.Lang)\n\tif err != nil {\n\t\treturn fmt.Sprintf(\"Execution Error: %v\\nOutput: %s\", err, out)\n\t}\n\n\tisError := strings.Contains(out, \"FAIL\") || strings.Contains(out, \"Error\")\n\n\tif cfg.ShowNotifications {\n\t\tif !cfg.NotifyOnlyOnFailure || isError {\n\t\t\ta.sendNotification(out, cfg.Lang)\n\t\t}\n\t}\n\n\tif isError && cfg.AutoCopyErrors {\n\t\tlines := strings.Split(out, \"\\n\")\n\t\tvar errorLines []string\n\t\tinErrorSection := false\n\t\tfor _, line := range lines {\n\t\t\t\t\ttrimmed := strings.TrimSpace(line)\n\t\t\t\t\tif trimmed == \"\" {\n\t\t\t\t\t\tif inErrorSection {\n\t\t\t\t\t\t\terrorLines = append(errorLines, line)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\t// Определяем начало или наличие ошибки в строке\n\t\t\t\t\t// Захватываем: # (сборка), FAIL, пути к файлам (.go:), паники и вхождения error\n\t\t\t\t\tisErrorTrigger := strings.HasPrefix(trimmed, \"#\") || \n\t\t\t\t\t\tstrings.Contains(line, \"--- FAIL\") || \n\t\t\t\t\t\tstrings.Contains(line, \"FAIL\\t\") || \n\t\t\t\t\t\tstrings.Contains(line, \".go:\") || \n\t\t\t\t\t\tstrings.Contains(strings.ToLower(line), \"error:\") || \n\t\t\t\t\t\tstrings.Contains(line, \"panic:\")\n\t\t\n\t\t\t\t\tif isErrorTrigger {\n\t\t\t\t\t\tinErrorSection = true\n\t\t\t\t\t} else if strings.Contains(line, \"--- PASS\") || strings.Contains(line, \"PASS\\t\") || strings.HasPrefix(trimmed, \"ok\\t\") {\n\t\t\t\t\t\tinErrorSection = false\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\tif inErrorSection {\n\t\t\t\t\t\terrorLines = append(errorLines, line)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\tif len(errorLines) > 0 {\n\t\t\t_ = wailsRuntime.ClipboardSetText(a.ctx, strings.Join(errorLines, \"\\n\"))\n\t\t}\n\t}\n\n\treturn out\n}\n\nfunc (a *App) sendNotification(output string, lang string) {\n\tif runtime.GOOS != \"windows\" {\n\t\treturn\n\t}\n\n\ttitle := \"Go Test Runner\"\n\tmsg := \"\"\n\tisError := strings.Contains(output, \"FAIL\") || strings.Contains(output, \"Error\")\n\n\tif lang == \"ru\" {\n\t\tif isError {\n\t\t\tmsg = \"❌ Тесты провалены! Обнаружены ошибки.\"\n\t\t} else {\n\t\t\tmsg = \"✅ Все тесты пройдены успешно!\"\n\t\t}\n\t} else {\n\t\tif isError {\n\t\t\tmsg = \"❌ Tests failed! Errors detected.\"\n\t\t} else {\n\t\t\tmsg = \"✅ All tests passed successfully!\"\n\t\t}\n\t}\n\n\tnotification := fmt.Sprintf(\"[void][System.Reflection.Assembly]::LoadWithPartialName('System.Windows.Forms'); $obj = New-Object System.Windows.Forms.NotifyIcon; $obj.Icon = [System.Drawing.SystemIcons]::Information; $obj.BalloonTipTitle = '%s'; $obj.BalloonTipText = '%s'; $obj.Visible = $true; $obj.ShowBalloonTip(5000);\", title, msg)\n\tcmd := exec.Command(\"powershell\", \"-NoProfile\", \"-Command\", notification)\n\tcmd.SysProcAttr = &syscall.SysProcAttr{HideWindow: true}\n\t_ = cmd.Run()\n}\n\nfunc (a *App) GetDiscoveredTests() []string {\n\tcwd, _ := os.Getwd()\n\tpkgs, _ := tester.DiscoverTests(cwd)\n\treturn pkgs\n}\n\nfunc (a *App) TogglePause() bool {\n\ta.mu.Lock()\n\tdefer a.mu.Unlock()\n\ta.isPaused = !a.isPaused\n\treturn a.isPaused\n}\n\nfunc (a *App) GetConfig() *config.Config {\n\treturn config.Load()\n}\n\nfunc (a *App) SaveConfig(cfg config.Config) {\n\t_ = config.Save(&cfg)\n\twailsRuntime.WindowSetAlwaysOnTop(a.ctx, cfg.AlwaysOnTop)\n}\n\n// onDomReady вызывается, когда фронтенд готов.\nfunc (a *App) onDomReady(ctx context.Context) {\n}\n\n// RestoreWindow восстанавливает окно из трея\nfunc (a *App) RestoreWindow() {\n\twailsRuntime.WindowShow(a.ctx)\n\twailsRuntime.WindowUnminimise(a.ctx)\n\twailsRuntime.WindowSetAlwaysOnTop(a.ctx, config.Load().AlwaysOnTop)\n}\n\n// onTrayReady настраивает меню трея\nfunc (a *App) onTrayReady() {\n\t// Установка иконки (пустая иконка или загруженная)\n\tsystray.SetTitle(\"Go Runner\")\n\tsystray.SetTooltip(\"Go Test Runner\")\n\n\tmOpen := systray.AddMenuItem(\"Открыть\", \"Восстановить окно\")\n\tsystray.AddSeparator()\n\tmQuit := systray.AddMenuItem(\"Выход\", \"Закрыть приложение\")\n\n\tgo func() {\n\t\tfor {\n\t\t\tselect {\n\t\t\tcase <-mOpen.ClickedCh:\n\t\t\t\ta.RestoreWindow()\n\t\t\tcase <-mQuit.ClickedCh:\n\t\t\t\ta.Quit()\n\t\t\t}\n\t\t}\n\t}()\n}\n\nfunc (a *App) onTrayExit() {\n\t// Очистка при выходе\n}\n\n// Quit завершает работу приложения\nfunc (a *App) Quit() {\n\tsystray.Quit()\n\twailsRuntime.Quit(a.ctx)\n}"
    },
    {
      "path": "build.bat",
      "content": "@echo off\necho === Starting Goruner Build Process ===\n\nREM Check if wails is installed\nwhere wails >nul 2>nul\nif %errorlevel% neq 0 (\n    echo ERROR: Wails CLI not found. Please install it first.\n    exit /b 1\n)\n\necho [1/3] Tidying Go modules...\ngo mod tidy\n\necho [3/3] Building Wails application...\nwails build\n\nif %errorlevel% equ 0 (\n    echo === Build Successful! Executable is in build/bin ===\n) else (\n    echo === Build Failed! ===\n    exit /b 1\n)\n\npause"
    },
    {
      "path": "frontend/dist/index.html",
      "content": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\"/>\n    <meta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\"/>\n    <title>goruner</title>\n  <script type=\"module\" crossorigin src=\"/assets/index-URTi4q_b.js\"></script>\n  <link rel=\"stylesheet\" crossorigin href=\"/assets/index-DiaTzeEe.css\">\n</head>\n<body>\n<div id=\"app\"></div>\n</body>\n</html>"
    },
    {
      "path": "frontend/index.html",
      "content": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\"/>\n    <meta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\"/>\n    <title>goruner</title>\n</head>\n<body>\n<div id=\"app\"></div>\n<script src=\"./src/main.js\" type=\"module\"></script>\n</body>\n</html>"
    },
    {
      "path": "frontend/package.json",
      "content": "{\n  \"name\": \"frontend\",\n  \"private\": true,\n  \"version\": \"0.0.0\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"dev\": \"vite\",\n    \"build\": \"vite build\",\n    \"preview\": \"vite preview\"\n  },\n  \"dependencies\": {\n    \"vue\": \"^3.4.21\",\n    \"element-plus\": \"^2.6.1\"\n  },\n  \"devDependencies\": {\n    \"@vitejs/plugin-vue\": \"^5.0.4\",\n    \"vite\": \"^5.2.2\"\n  }\n}"
    },
    {
      "path": "frontend/src/App.vue",
      "content": "<template>\n  <el-container class=\"app-container\">\n    <el-header height=\"40px\" class=\"header-tabs\">\n      <el-tabs v-model=\"activeTab\">\n        <el-tab-pane :label=\"t('console')\" name=\"console\" />\n        <el-tab-pane :label=\"t('settings')\" name=\"settings\" />\n      </el-tabs>\n    </el-header>\n\n    <el-main v-if=\"activeTab === 'console'\" class=\"console-view\">\n      <div class=\"console-wrapper\">\n        <div class=\"console-output\" ref=\"consoleRef\">\n          <div v-for=\"(line, index) in formattedOutput\" :key=\"index\" :class=\"line.type\" class=\"console-line\">\n            <span>{{ line.text }}</span>\n            <el-button \n              v-if=\"line.text.includes(t('errorsLabel'))\" \n              class=\"inline-copy-btn\"\n              type=\"danger\" \n              size=\"small\" \n              circle\n              @click.stop=\"copyErrors\"\n              :title=\"t('copyTip')\"\n            >\n              <template #icon>\n                <svg viewBox=\"0 0 1024 1024\" width=\"15\" height=\"15\">\n                  <path fill=\"currentColor\" d=\"M768 832a128 128 0 0 1-128 128H192A128 128 0 0 1 64 832V384a128 128 0 0 1 128-128h64v-64a128 128 0 0 1 128-128h448a128 128 0 0 1 128 128v448a128 128 0 0 1-128 128h-64v64zM384 128a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64V192a64 64 0 0 0-64-64H384zm-192 192a64 64 0 0 0-64 64v448a64 64 0 0 0 64 64h448a64 64 0 0 0 64-64v-64H384a128 128 0 0 1-128-128V320h-64z\"></path>\n                </svg>\n              </template>\n            </el-button>\n          </div>\n        </div>\n      </div>\n      <div class=\"controls-footer\">\n        <div class=\"controls\">\n          <el-button class=\"icon-btn restart\" @click=\"runTests\" :loading=\"loading\" :title=\"t('restartTip')\">\n            <template #icon>\n              <svg viewBox=\"0 0 1024 1024\" width=\"22\" height=\"22\">\n                <path fill=\"currentColor\" d=\"M224 416h192a32 32 0 0 0 0-64H306.432A352.064 352.064 0 0 1 896 512c0 194.4-157.6 352-352 352a351.488 351.488 0 0 1-295.552-160.896 32 32 0 0 0-54.656 33.152A415.488 415.488 0 0 0 544 928c229.76 0 416-186.24 416-416S773.76 96 544 96c-184.256 0-341.312 119.744-397.632 286.336V224a32 32 0 0 0-64 0v192a32 32 0 0 0 32 32h109.632z\" style=\"stroke-width: 40px; stroke: currentColor;\"></path>\n              </svg>\n            </template>\n          </el-button>\n          \n          <el-button class=\"icon-btn toggle\" :class=\"{ 'is-paused': isPaused }\" @click=\"togglePause\" :title=\"isPaused ? t('resumeTip') : t('pauseTip')\">\n            <template #icon>\n              <svg v-if=\"!isPaused\" viewBox=\"0 0 1024 1024\" width=\"22\" height=\"22\">\n                <rect x=\"256\" y=\"160\" width=\"160\" height=\"704\" rx=\"40\" fill=\"currentColor\" />\n                <rect x=\"608\" y=\"160\" width=\"160\" height=\"704\" rx=\"40\" fill=\"currentColor\" />\n              </svg>\n              <svg v-else viewBox=\"0 0 1024 1024\" width=\"22\" height=\"22\">\n                <path fill=\"currentColor\" d=\"M256 160l576 352-576 352z\" style=\"stroke-width: 40px; stroke: currentColor; stroke-linejoin: round;\"></path>\n              </svg>\n            </template>\n          </el-button>\n\n          <el-button class=\"icon-btn lang-btn\" @click=\"toggleLang\" :title=\"t('langTip')\">\n            <span class=\"lang-label\">{{ (config.lang || 'ru').toUpperCase() }}</span>\n          </el-button>\n        </div>\n      </div>\n    </el-main>\n\n    <el-main v-if=\"activeTab === 'settings'\" class=\"settings-view\">\n      <el-form :model=\"config\" label-position=\"top\" class=\"settings-form\">\n        <el-form-item :label=\"t('exclusionsLabel')\">\n          <el-input type=\"textarea\" v-model=\"exclusionText\" rows=\"4\" />\n        </el-form-item>\n        <el-form-item>\n          <el-checkbox v-model=\"config.show_passed\">{{ t('showPassed') }}</el-checkbox>\n        </el-form-item>\n        <el-form-item>\n          <el-checkbox v-model=\"config.auto_watch\">{{ t('autoWatch') }}</el-checkbox>\n        </el-form-item>\n        <el-form-item>\n          <el-checkbox v-model=\"config.show_notifications\">{{ t('showNotifications') }}</el-checkbox>\n        </el-form-item>\n        <el-form-item v-if=\"config.show_notifications\" style=\"margin-left: 20px;\">\n          <el-checkbox v-model=\"config.notify_only_on_failure\">{{ t('notifyOnlyOnFailure') }}</el-checkbox>\n        </el-form-item>\n        <el-form-item>\n          <el-checkbox v-model=\"config.always_on_top\">{{ t('alwaysOnTop') }}</el-checkbox>\n        </el-form-item>\n        <el-form-item>\n          <el-checkbox v-model=\"config.auto_copy_errors\">{{ t('autoCopyErrors') }}</el-checkbox>\n        </el-form-item>\n        <el-button type=\"success\" @click=\"saveSettings\">{{ t('saveBtn') }}</el-button>\n      </el-form>\n    </el-main>\n  </el-container>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed, watch, nextTick } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport { EventsOn, ClipboardSetText } from '../wailsjs/runtime/runtime'\nimport { RunTests, TogglePause, GetConfig, SaveConfig } from '../wailsjs/go/main/App'\n\nconst activeTab = ref('console')\nconst output = ref('')\nconst loading = ref(false)\nconst isPaused = ref(false)\nconst config = ref({\n  exclusions: [],\n  show_passed: true,\n  auto_watch: true,\n  show_notifications: true,\n  notify_only_on_failure: false,\n  always_on_top: false,\n  minimize_to_tray: false,\n  auto_copy_errors: false,\n  lang: 'ru'\n})\nconst exclusionText = ref('')\nconst consoleRef = ref(null)\n\nconst i18n = {\n  ru: {\n    console: 'Консоль', settings: 'Настройки', errorsLabel: 'Ошибки в тестах:', successLabel: 'Успешные тесты:',\n    copyTip: 'Скопировать ошибки', restartTip: 'Перезапустить тесты', resumeTip: 'Возобновить', pauseTip: 'Пауза',\n    langTip: 'Сменить язык', exclusionsLabel: 'Исключения (по одному в строке)', showPassed: 'Показывать успешные тесты',\n    autoWatch: 'Автоматически перезапускать тесты', showNotifications: 'Показывать уведомления', notifyOnlyOnFailure: 'Только при ошибках', \n    alwaysOnTop: 'Поверх всех окон', autoCopyErrors: 'Автокопирование ошибок', saveBtn: 'Сохранить настройки', copied: 'Ошибки скопированы в буфер',\n      running: 'Запуск тестов...', waiting: 'Ожидание изменений...'\n    },\n    en: {\n      console: 'Console', settings: 'Settings', errorsLabel: 'Errors in tests:', successLabel: 'Successful tests:',\n      copyTip: 'Copy errors', restartTip: 'Restart tests', resumeTip: 'Resume', pauseTip: 'Pause',\n      langTip: 'Change language', exclusionsLabel: 'Exclusions (one per line)', showPassed: 'Show successful tests',\n      autoWatch: 'Automatically restart tests', showNotifications: 'Show notifications', notifyOnlyOnFailure: 'Only on failure', \n      alwaysOnTop: 'Always on Top', autoCopyErrors: 'Auto-copy Errors', saveBtn: 'Save Settings', copied: 'Errors copied to clipboard',\n      running: 'Running tests...', waiting: 'Waiting for changes...'\n    }\n};\n\nconst t = (key) => i18n[config.value.lang || 'en'][key];\n\nconst toggleLang = async () => {\n  const isWaiting = output.value === t('waiting');\n  config.value.lang = config.value.lang === 'ru' ? 'en' : 'ru';\n  await SaveConfig(config.value);\n  if (isWaiting) {\n    output.value = t('waiting');\n  } else if (output.value && !output.value.includes('Waiting') && !output.value.includes('Ожидание')) {\n    runTests();\n  }\n};\n\nconst formattedOutput = computed(() => {\n  let inErrorSection = false;\n  const errMarker = t('errorsLabel');\n  const successMarker = t('successLabel');\n\n  return output.value.split('\\n').map(line => {\n    if (line.includes(errMarker)) inErrorSection = true;\n    if (line.includes(successMarker)) inErrorSection = false;\n  \n    const trimmed = line.trim();\n    let type = 'default';\n    \n    const isError = trimmed.startsWith('#') || \n                    line.includes('FAIL') || \n                    line.includes('.go:') || \n                    line.toLowerCase().includes('error:') || \n                    line.includes('panic:') ||\n                    (inErrorSection && trimmed && !line.includes(errMarker));\n  \n    if (isError) {\n      type = 'error-text';\n    } else if (line.includes('PASS') || line.includes('✅') || trimmed.startsWith('ok')) {\n      type = 'success-text';\n    }\n    return { text: line, type };\n  });\n});\n\nconst copyErrors = async () => {\n  const errorLines = formattedOutput.value\n    .filter(l => l.type === 'error-text' && !l.text.includes(t('errorsLabel')))\n    .map(l => l.text);\n  \n  if (errorLines.length > 0) {\n    const success = await ClipboardSetText(errorLines.join('\\n'));\n    if (success) {\n      ElMessage({ message: t('copied'), type: 'success', offset: 50 });\n    }\n  }\n};\n\nconst scrollToBottom = async () => {\n  await nextTick();\n  if (consoleRef.value) {\n    consoleRef.value.scrollTop = consoleRef.value.scrollHeight;\n  }\n};\n\nwatch(output, () => scrollToBottom());\n\nconst runTests = async () => {\n  loading.value = true\n  output.value = t('running') + \"\\n\"\n  output.value = await RunTests()\n  loading.value = false\n}\n\nconst togglePause = async () => {\n  isPaused.value = await TogglePause()\n}\n\nconst saveSettings = async () => {\n  config.value.exclusions = exclusionText.value.split('\\n').filter(s => s.trim())\n  await SaveConfig(config.value)\n}\n\nonMounted(async () => {\n  try {\n    config.value = await GetConfig()\n    output.value = t('waiting')\n    exclusionText.value = (config.value.exclusions || []).join('\\n')\n    \n    EventsOn('trigger_test', (msg) => {\n      if (!loading.value) {\n        output.value = `[${new Date().toLocaleTimeString()}] ${msg}...\\n` + output.value\n        runTests()\n      }\n    })\n  } catch (err) {\n    output.value = \"Error: \" + err\n  }\n})\n</script>\n\n<style>\nbody {\n  margin: 0;\n  background: #1e1e1e;\n  color: #d4d4d4;\n  font-family: 'Consolas', monospace;\n  overflow: hidden;\n}\n.app-container {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n}\n.console-view {\n  display: flex;\n  flex-direction: column;\n  padding: 0 !important;\n  flex: 1;\n  overflow: hidden;\n}\n.console-wrapper {\n  position: relative;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  padding: 10px 10px 0 10px;\n}\n.console-output {\n  flex: 1;\n  background: #000;\n  color: #d4d4d4;\n  padding: 15px;\n  overflow-y: auto;\n  border: 1px solid #333;\n  white-space: pre-wrap;\n  font-size: 13px;\n  line-height: 1.4;\n  scroll-behavior: smooth;\n}\n.console-line {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  min-height: 20px;\n}\n.inline-copy-btn {\n  width: 28px !important;\n  height: 28px !important;\n  min-height: 28px !important;\n  padding: 0 !important;\n  margin-left: 6px;\n  background: rgba(255, 85, 85, 0.2) !important;\n  border: 1px solid rgba(255, 85, 85, 0.6) !important;\n  color: #ff5555 !important;\n  display: inline-flex !important;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;\n  cursor: pointer;\n  box-shadow: 0 0 8px rgba(255, 85, 85, 0.4) !important;\n}\n.inline-copy-btn:hover {\n  background: #ff5555 !important;\n  border-color: #ff5555 !important;\n  transform: scale(1.15);\n  color: #000 !important;\n  box-shadow: 0 0 18px rgba(255, 85, 85, 1) !important;\n}\n.error-text {\n  color: #ff5555 !important;\n  font-weight: bold;\n}\n.success-text {\n  color: #50fa7b !important;\n}\n.default {\n  color: #888;\n}\n.controls-footer {\n  padding: 8px 12px;\n  background: #1e1e1e;\n  border-top: 1px solid #333;\n  display: flex;\n  align-items: center;\n}\n.controls {\n  display: flex;\n  gap: 2px;\n}\n.icon-btn {\n  width: 36px !important;\n  height: 36px !important;\n  padding: 0 !important;\n  border-radius: 6px !important;\n  background: #2d2d2d !important;\n  border: 1px solid #444 !important;\n  color: #aaa !important;\n  transition: all 0.2s ease;\n}\n.icon-btn:hover {\n  color: #fff !important;\n  border-color: #666 !important;\n  background: #3d3d3d !important;\n}\n.icon-btn.restart:hover {\n  color: #409eff !important;\n  box-shadow: 0 0 10px rgba(64, 158, 255, 0.3);\n}\n.icon-btn.toggle {\n  color: #e6a23c !important;\n}\n.icon-btn.toggle.is-paused {\n  color: #67c23a !important;\n}\n.icon-btn.toggle:hover {\n  box-shadow: 0 0 10px currentColor;\n}\n.lang-btn {\n  border-color: #555 !important;\n}\n.lang-label {\n  font-size: 11px;\n  font-weight: bold;\n}\n.header-tabs {\n  background: #252526;\n  border-bottom: 1px solid #333;\n}\n.el-tabs__item {\n  color: #888 !important;\n}\n.el-tabs__item.is-active {\n  color: #fff !important;\n}\n.settings-view {\n  padding: 20px !important;\n  background: #1e1e1e;\n}\n.settings-form {\n  max-width: 600px;\n}\n.settings-form .el-form-item {\n  margin-bottom: 2px;\n}\n.settings-form .el-form-item:first-child {\n  margin-bottom: 22px;\n}\n.settings-form .el-button {\n  margin-top: 12px;\n}\n</style>"
    },
    {
      "path": "frontend/src/main.js",
      "content": "import {createApp} from 'vue'\nimport ElementPlus from 'element-plus'\nimport 'element-plus/dist/index.css'\nimport App from './App.vue'\n\nconst app = createApp(App)\napp.use(ElementPlus)\napp.mount('#app')"
    },
    {
      "path": "frontend/vite.config.js",
      "content": "import {defineConfig} from 'vite'\nimport vue from '@vitejs/plugin-vue'\nimport path from 'path'\n\nexport default defineConfig({\n  plugins: [vue()],\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, './src'),\n      '/wailsjs': path.resolve(__dirname, './wailsjs')\n    }\n  }\n})"
    },
    {
      "path": "frontend/wailsjs/.gitkeep"
    },
    {
      "path": "frontend/wailsjs/go/main/App.js",
      "content": "export function GetConfig() {\n  return window['go']['main']['App']['GetConfig']();\n}\n\nexport function GetDiscoveredTests() {\n  return window['go']['main']['App']['GetDiscoveredTests']();\n}\n\nexport function RunTests() {\n  return window['go']['main']['App']['RunTests']();\n}\n\nexport function SaveConfig(arg1) {\n  return window['go']['main']['App']['SaveConfig'](arg1);\n}\n\nexport function TogglePause() {\n  return window['go']['main']['App']['TogglePause']();\n}"
    },
    {
      "path": "frontend/wailsjs/runtime/runtime.js",
      "content": "/*\n _       __      _ __\n| |     / /___ _(_) /____\n| | /| / / __ `/ / / ___/\n| |/ |/ / /_/ / / (__  )\n|__/|__/\\__,_/_/_/____/\nThe electron alternative for Go\n(c) Lea Anthony 2019-present\n*/\n\nexport function LogPrint(message) {\n    window.runtime.LogPrint(message);\n}\n\nexport function LogTrace(message) {\n    window.runtime.LogTrace(message);\n}\n\nexport function LogDebug(message) {\n    window.runtime.LogDebug(message);\n}\n\nexport function LogInfo(message) {\n    window.runtime.LogInfo(message);\n}\n\nexport function LogWarning(message) {\n    window.runtime.LogWarning(message);\n}\n\nexport function LogError(message) {\n    window.runtime.LogError(message);\n}\n\nexport function LogFatal(message) {\n    window.runtime.LogFatal(message);\n}\n\nexport function EventsOnMultiple(eventName, callback, maxCallbacks) {\n    return window.runtime.EventsOnMultiple(eventName, callback, maxCallbacks);\n}\n\nexport function EventsOn(eventName, callback) {\n    return EventsOnMultiple(eventName, callback, -1);\n}\n\nexport function EventsOff(eventName, ...additionalEventNames) {\n    return window.runtime.EventsOff(eventName, ...additionalEventNames);\n}\n\nexport function EventsOnce(eventName, callback) {\n    return EventsOnMultiple(eventName, callback, 1);\n}\n\nexport function EventsEmit(eventName) {\n    let args = [eventName].slice.call(arguments);\n    return window.runtime.EventsEmit.apply(null, args);\n}\n\nexport function WindowReload() {\n    window.runtime.WindowReload();\n}\n\nexport function WindowReloadApp() {\n    window.runtime.WindowReloadApp();\n}\n\nexport function WindowSetAlwaysOnTop(b) {\n    window.runtime.WindowSetAlwaysOnTop(b);\n}\n\nexport function WindowSetSystemDefaultTheme() {\n    window.runtime.WindowSetSystemDefaultTheme();\n}\n\nexport function WindowSetLightTheme() {\n    window.runtime.WindowSetLightTheme();\n}\n\nexport function WindowSetDarkTheme() {\n    window.runtime.WindowSetDarkTheme();\n}\n\nexport function WindowCenter() {\n    window.runtime.WindowCenter();\n}\n\nexport function WindowSetTitle(title) {\n    window.runtime.WindowSetTitle(title);\n}\n\nexport function WindowFullscreen() {\n    window.runtime.WindowFullscreen();\n}\n\nexport function WindowUnfullscreen() {\n    window.runtime.WindowUnfullscreen();\n}\n\nexport function WindowIsFullscreen() {\n    return window.runtime.WindowIsFullscreen();\n}\n\nexport function WindowGetSize() {\n    return window.runtime.WindowGetSize();\n}\n\nexport function WindowSetSize(width, height) {\n    window.runtime.WindowSetSize(width, height);\n}\n\nexport function WindowSetMaxSize(width, height) {\n    window.runtime.WindowSetMaxSize(width, height);\n}\n\nexport function WindowSetMinSize(width, height) {\n    window.runtime.WindowSetMinSize(width, height);\n}\n\nexport function WindowSetPosition(x, y) {\n    window.runtime.WindowSetPosition(x, y);\n}\n\nexport function WindowGetPosition() {\n    return window.runtime.WindowGetPosition();\n}\n\nexport function WindowHide() {\n    window.runtime.WindowHide();\n}\n\nexport function WindowShow() {\n    window.runtime.WindowShow();\n}\n\nexport function WindowMaximise() {\n    window.runtime.WindowMaximise();\n}\n\nexport function WindowToggleMaximise() {\n    window.runtime.WindowToggleMaximise();\n}\n\nexport function WindowUnmaximise() {\n    window.runtime.WindowUnmaximise();\n}\n\nexport function WindowIsMaximised() {\n    return window.runtime.WindowIsMaximised();\n}\n\nexport function WindowMinimise() {\n    window.runtime.WindowMinimise();\n}\n\nexport function WindowUnminimise() {\n    window.runtime.WindowUnminimise();\n}\n\nexport function WindowSetBackgroundColour(R, G, B, A) {\n    window.runtime.WindowSetBackgroundColour(R, G, B, A);\n}\n\nexport function ScreenGetAll() {\n    return window.runtime.ScreenGetAll();\n}\n\nexport function WindowIsMinimised() {\n    return window.runtime.WindowIsMinimised();\n}\n\nexport function WindowIsNormal() {\n    return window.runtime.WindowIsNormal();\n}\n\nexport function BrowserOpenURL(url) {\n    window.runtime.BrowserOpenURL(url);\n}\n\nexport function Environment() {\n    return window.runtime.Environment();\n}\n\nexport function Quit() {\n    window.runtime.Quit();\n}\n\nexport function Hide() {\n    window.runtime.Hide();\n}\n\nexport function Show() {\n    window.runtime.Show();\n}\n\nexport function ClipboardGetText() {\n    return window.runtime.ClipboardGetText();\n}\n\nexport function ClipboardSetText(text) {\n    return window.runtime.ClipboardSetText(text);\n}\n\nexport function OnFileDrop(callback, useDropTarget) {\n    return window.runtime.OnFileDrop(callback, useDropTarget);\n}\n\nexport function OnFileDropOff() {\n    return window.runtime.OnFileDropOff();\n}\n\nexport function CanResolveFilePaths() {\n    return window.runtime.CanResolveFilePaths();\n}\n\nexport function ResolveFilePaths(files) {\n    return window.runtime.ResolveFilePaths(files);\n}"
    },
    {
      "path": "frontend/wailsjs/wailsjs/go/main/App.d.ts",
      "content": "// Cynhyrchwyd y ffeil hon yn awtomatig. PEIDIWCH Â MODIWL\n// This file is automatically generated. DO NOT EDIT\nimport {config} from '../models';\n\nexport function GetConfig():Promise<config.Config>;\n\nexport function GetDiscoveredTests():Promise<Array<string>>;\n\nexport function Quit():Promise<void>;\n\nexport function RestoreWindow():Promise<void>;\n\nexport function RunTests():Promise<string>;\n\nexport function SaveConfig(arg1:config.Config):Promise<void>;\n\nexport function TogglePause():Promise<boolean>;"
    },
    {
      "path": "frontend/wailsjs/wailsjs/go/main/App.js",
      "content": "// @ts-check\n// Cynhyrchwyd y ffeil hon yn awtomatig. PEIDIWCH Â MODIWL\n// This file is automatically generated. DO NOT EDIT\n\nexport function GetConfig() {\n  return window['go']['main']['App']['GetConfig']();\n}\n\nexport function GetDiscoveredTests() {\n  return window['go']['main']['App']['GetDiscoveredTests']();\n}\n\nexport function Quit() {\n  return window['go']['main']['App']['Quit']();\n}\n\nexport function RestoreWindow() {\n  return window['go']['main']['App']['RestoreWindow']();\n}\n\nexport function RunTests() {\n  return window['go']['main']['App']['RunTests']();\n}\n\nexport function SaveConfig(arg1) {\n  return window['go']['main']['App']['SaveConfig'](arg1);\n}\n\nexport function TogglePause() {\n  return window['go']['main']['App']['TogglePause']();\n}"
    },
    {
      "path": "frontend/wailsjs/wailsjs/go/models.ts",
      "content": "export namespace config {\n\t\n\texport class Config {\n\t    exclusions: string[];\n\t    masks: string[];\n\t    show_passed: boolean;\n\t    auto_watch: boolean;\n\t    show_notifications: boolean;\n\t    notify_only_on_failure: boolean;\n\t    always_on_top: boolean;\n\t    auto_copy_errors: boolean;\n\t    lang: string;\n\t\n\t    static createFrom(source: any = {}) {\n\t        return new Config(source);\n\t    }\n\t\n\t    constructor(source: any = {}) {\n\t        if ('string' === typeof source) source = JSON.parse(source);\n\t        this.exclusions = source[\"exclusions\"];\n\t        this.masks = source[\"masks\"];\n\t        this.show_passed = source[\"show_passed\"];\n\t        this.auto_watch = source[\"auto_watch\"];\n\t        this.show_notifications = source[\"show_notifications\"];\n\t        this.notify_only_on_failure = source[\"notify_only_on_failure\"];\n\t        this.always_on_top = source[\"always_on_top\"];\n\t        this.auto_copy_errors = source[\"auto_copy_errors\"];\n\t        this.lang = source[\"lang\"];\n\t    }\n\t}\n\n}"
    },
    {
      "path": "frontend/wailsjs/wailsjs/runtime/package.json",
      "content": "{\n  \"name\": \"@wailsapp/runtime\",\n  \"version\": \"2.0.0\",\n  \"description\": \"Wails Javascript runtime library\",\n  \"main\": \"runtime.js\",\n  \"types\": \"runtime.d.ts\",\n  \"scripts\": {\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/wailsapp/wails.git\"\n  },\n  \"keywords\": [\n    \"Wails\",\n    \"Javascript\",\n    \"Go\"\n  ],\n  \"author\": \"Lea Anthony <lea.anthony@gmail.com>\",\n  \"license\": \"MIT\",\n  \"bugs\": {\n    \"url\": \"https://github.com/wailsapp/wails/issues\"\n  },\n  \"homepage\": \"https://github.com/wailsapp/wails#readme\"\n}"
    },
    {
      "path": "frontend/wailsjs/wailsjs/runtime/runtime.d.ts",
      "content": "/*\n _       __      _ __\n| |     / /___ _(_) /____\n| | /| / / __ `/ / / ___/\n| |/ |/ / /_/ / / (__  )\n|__/|__/\\__,_/_/_/____/\nThe electron alternative for Go\n(c) Lea Anthony 2019-present\n*/\n\nexport interface Position {\n    x: number;\n    y: number;\n}\n\nexport interface Size {\n    w: number;\n    h: number;\n}\n\nexport interface Screen {\n    isCurrent: boolean;\n    isPrimary: boolean;\n    width : number\n    height : number\n}\n\n// Environment information such as platform, buildtype, ...\nexport interface EnvironmentInfo {\n    buildType: string;\n    platform: string;\n    arch: string;\n}\n\n// [EventsEmit](https://wails.io/docs/reference/runtime/events#eventsemit)\n// emits the given event. Optional data may be passed with the event.\n// This will trigger any event listeners.\nexport function EventsEmit(eventName: string, ...data: any): void;\n\n// [EventsOn](https://wails.io/docs/reference/runtime/events#eventson) sets up a listener for the given event name.\nexport function EventsOn(eventName: string, callback: (...data: any) => void): () => void;\n\n// [EventsOnMultiple](https://wails.io/docs/reference/runtime/events#eventsonmultiple)\n// sets up a listener for the given event name, but will only trigger a given number times.\nexport function EventsOnMultiple(eventName: string, callback: (...data: any) => void, maxCallbacks: number): () => void;\n\n// [EventsOnce](https://wails.io/docs/reference/runtime/events#eventsonce)\n// sets up a listener for the given event name, but will only trigger once.\nexport function EventsOnce(eventName: string, callback: (...data: any) => void): () => void;\n\n// [EventsOff](https://wails.io/docs/reference/runtime/events#eventsoff)\n// unregisters the listener for the given event name.\nexport function EventsOff(eventName: string, ...additionalEventNames: string[]): void;\n\n// [EventsOffAll](https://wails.io/docs/reference/runtime/events#eventsoffall)\n// unregisters all listeners.\nexport function EventsOffAll(): void;\n\n// [LogPrint](https://wails.io/docs/reference/runtime/log#logprint)\n// logs the given message as a raw message\nexport function LogPrint(message: string): void;\n\n// [LogTrace](https://wails.io/docs/reference/runtime/log#logtrace)\n// logs the given message at the `trace` log level.\nexport function LogTrace(message: string): void;\n\n// [LogDebug](https://wails.io/docs/reference/runtime/log#logdebug)\n// logs the given message at the `debug` log level.\nexport function LogDebug(message: string): void;\n\n// [LogError](https://wails.io/docs/reference/runtime/log#logerror)\n// logs the given message at the `error` log level.\nexport function LogError(message: string): void;\n\n// [LogFatal](https://wails.io/docs/reference/runtime/log#logfatal)\n// logs the given message at the `fatal` log level.\n// The application will quit after calling this method.\nexport function LogFatal(message: string): void;\n\n// [LogInfo](https://wails.io/docs/reference/runtime/log#loginfo)\n// logs the given message at the `info` log level.\nexport function LogInfo(message: string): void;\n\n// [LogWarning](https://wails.io/docs/reference/runtime/log#logwarning)\n// logs the given message at the `warning` log level.\nexport function LogWarning(message: string): void;\n\n// [WindowReload](https://wails.io/docs/reference/runtime/window#windowreload)\n// Forces a reload by the main application as well as connected browsers.\nexport function WindowReload(): void;\n\n// [WindowReloadApp](https://wails.io/docs/reference/runtime/window#windowreloadapp)\n// Reloads the application frontend.\nexport function WindowReloadApp(): void;\n\n// [WindowSetAlwaysOnTop](https://wails.io/docs/reference/runtime/window#windowsetalwaysontop)\n// Sets the window AlwaysOnTop or not on top.\nexport function WindowSetAlwaysOnTop(b: boolean): void;\n\n// [WindowSetSystemDefaultTheme](https://wails.io/docs/next/reference/runtime/window#windowsetsystemdefaulttheme)\n// *Windows only*\n// Sets window theme to system default (dark/light).\nexport function WindowSetSystemDefaultTheme(): void;\n\n// [WindowSetLightTheme](https://wails.io/docs/next/reference/runtime/window#windowsetlighttheme)\n// *Windows only*\n// Sets window to light theme.\nexport function WindowSetLightTheme(): void;\n\n// [WindowSetDarkTheme](https://wails.io/docs/next/reference/runtime/window#windowsetdarktheme)\n// *Windows only*\n// Sets window to dark theme.\nexport function WindowSetDarkTheme(): void;\n\n// [WindowCenter](https://wails.io/docs/reference/runtime/window#windowcenter)\n// Centers the window on the monitor the window is currently on.\nexport function WindowCenter(): void;\n\n// [WindowSetTitle](https://wails.io/docs/reference/runtime/window#windowsettitle)\n// Sets the text in the window title bar.\nexport function WindowSetTitle(title: string): void;\n\n// [WindowFullscreen](https://wails.io/docs/reference/runtime/window#windowfullscreen)\n// Makes the window full screen.\nexport function WindowFullscreen(): void;\n\n// [WindowUnfullscreen](https://wails.io/docs/reference/runtime/window#windowunfullscreen)\n// Restores the previous window dimensions and position prior to full screen.\nexport function WindowUnfullscreen(): void;\n\n// [WindowIsFullscreen](https://wails.io/docs/reference/runtime/window#windowisfullscreen)\n// Returns the state of the window, i.e. whether the window is in full screen mode or not.\nexport function WindowIsFullscreen(): Promise<boolean>;\n\n// [WindowSetSize](https://wails.io/docs/reference/runtime/window#windowsetsize)\n// Sets the width and height of the window.\nexport function WindowSetSize(width: number, height: number): void;\n\n// [WindowGetSize](https://wails.io/docs/reference/runtime/window#windowgetsize)\n// Gets the width and height of the window.\nexport function WindowGetSize(): Promise<Size>;\n\n// [WindowSetMaxSize](https://wails.io/docs/reference/runtime/window#windowsetmaxsize)\n// Sets the maximum window size. Will resize the window if the window is currently larger than the given dimensions.\n// Setting a size of 0,0 will disable this constraint.\nexport function WindowSetMaxSize(width: number, height: number): void;\n\n// [WindowSetMinSize](https://wails.io/docs/reference/runtime/window#windowsetminsize)\n// Sets the minimum window size. Will resize the window if the window is currently smaller than the given dimensions.\n// Setting a size of 0,0 will disable this constraint.\nexport function WindowSetMinSize(width: number, height: number): void;\n\n// [WindowSetPosition](https://wails.io/docs/reference/runtime/window#windowsetposition)\n// Sets the window position relative to the monitor the window is currently on.\nexport function WindowSetPosition(x: number, y: number): void;\n\n// [WindowGetPosition](https://wails.io/docs/reference/runtime/window#windowgetposition)\n// Gets the window position relative to the monitor the window is currently on.\nexport function WindowGetPosition(): Promise<Position>;\n\n// [WindowHide](https://wails.io/docs/reference/runtime/window#windowhide)\n// Hides the window.\nexport function WindowHide(): void;\n\n// [WindowShow](https://wails.io/docs/reference/runtime/window#windowshow)\n// Shows the window, if it is currently hidden.\nexport function WindowShow(): void;\n\n// [WindowMaximise](https://wails.io/docs/reference/runtime/window#windowmaximise)\n// Maximises the window to fill the screen.\nexport function WindowMaximise(): void;\n\n// [WindowToggleMaximise](https://wails.io/docs/reference/runtime/window#windowtogglemaximise)\n// Toggles between Maximised and UnMaximised.\nexport function WindowToggleMaximise(): void;\n\n// [WindowUnmaximise](https://wails.io/docs/reference/runtime/window#windowunmaximise)\n// Restores the window to the dimensions and position prior to maximising.\nexport function WindowUnmaximise(): void;\n\n// [WindowIsMaximised](https://wails.io/docs/reference/runtime/window#windowismaximised)\n// Returns the state of the window, i.e. whether the window is maximised or not.\nexport function WindowIsMaximised(): Promise<boolean>;\n\n// [WindowMinimise](https://wails.io/docs/reference/runtime/window#windowminimise)\n// Minimises the window.\nexport function WindowMinimise(): void;\n\n// [WindowUnminimise](https://wails.io/docs/reference/runtime/window#windowunminimise)\n// Restores the window to the dimensions and position prior to minimising.\nexport function WindowUnminimise(): void;\n\n// [WindowIsMinimised](https://wails.io/docs/reference/runtime/window#windowisminimised)\n// Returns the state of the window, i.e. whether the window is minimised or not.\nexport function WindowIsMinimised(): Promise<boolean>;\n\n// [WindowIsNormal](https://wails.io/docs/reference/runtime/window#windowisnormal)\n// Returns the state of the window, i.e. whether the window is normal or not.\nexport function WindowIsNormal(): Promise<boolean>;\n\n// [WindowSetBackgroundColour](https://wails.io/docs/reference/runtime/window#windowsetbackgroundcolour)\n// Sets the background colour of the window to the given RGBA colour definition. This colour will show through for all transparent pixels.\nexport function WindowSetBackgroundColour(R: number, G: number, B: number, A: number): void;\n\n// [ScreenGetAll](https://wails.io/docs/reference/runtime/window#screengetall)\n// Gets the all screens. Call this anew each time you want to refresh data from the underlying windowing system.\nexport function ScreenGetAll(): Promise<Screen[]>;\n\n// [BrowserOpenURL](https://wails.io/docs/reference/runtime/browser#browseropenurl)\n// Opens the given URL in the system browser.\nexport function BrowserOpenURL(url: string): void;\n\n// [Environment](https://wails.io/docs/reference/runtime/intro#environment)\n// Returns information about the environment\nexport function Environment(): Promise<EnvironmentInfo>;\n\n// [Quit](https://wails.io/docs/reference/runtime/intro#quit)\n// Quits the application.\nexport function Quit(): void;\n\n// [Hide](https://wails.io/docs/reference/runtime/intro#hide)\n// Hides the application.\nexport function Hide(): void;\n\n// [Show](https://wails.io/docs/reference/runtime/intro#show)\n// Shows the application.\nexport function Show(): void;\n\n// [ClipboardGetText](https://wails.io/docs/reference/runtime/clipboard#clipboardgettext)\n// Returns the current text stored on clipboard\nexport function ClipboardGetText(): Promise<string>;\n\n// [ClipboardSetText](https://wails.io/docs/reference/runtime/clipboard#clipboardsettext)\n// Sets a text on the clipboard\nexport function ClipboardSetText(text: string): Promise<boolean>;\n\n// [OnFileDrop](https://wails.io/docs/reference/runtime/draganddrop#onfiledrop)\n// OnFileDrop listens to drag and drop events and calls the callback with the coordinates of the drop and an array of path strings.\nexport function OnFileDrop(callback: (x: number, y: number ,paths: string[]) => void, useDropTarget: boolean) :void\n\n// [OnFileDropOff](https://wails.io/docs/reference/runtime/draganddrop#dragandddropoff)\n// OnFileDropOff removes the drag and drop listeners and handlers.\nexport function OnFileDropOff() :void\n\n// Check if the file path resolver is available\nexport function CanResolveFilePaths(): boolean;\n\n// Resolves file paths for an array of files\nexport function ResolveFilePaths(files: File[]): void"
    },
    {
      "path": "frontend/wailsjs/wailsjs/runtime/runtime.js",
      "content": "/*\n _       __      _ __\n| |     / /___ _(_) /____\n| | /| / / __ `/ / / ___/\n| |/ |/ / /_/ / / (__  )\n|__/|__/\\__,_/_/_/____/\nThe electron alternative for Go\n(c) Lea Anthony 2019-present\n*/\n\nexport function LogPrint(message) {\n    window.runtime.LogPrint(message);\n}\n\nexport function LogTrace(message) {\n    window.runtime.LogTrace(message);\n}\n\nexport function LogDebug(message) {\n    window.runtime.LogDebug(message);\n}\n\nexport function LogInfo(message) {\n    window.runtime.LogInfo(message);\n}\n\nexport function LogWarning(message) {\n    window.runtime.LogWarning(message);\n}\n\nexport function LogError(message) {\n    window.runtime.LogError(message);\n}\n\nexport function LogFatal(message) {\n    window.runtime.LogFatal(message);\n}\n\nexport function EventsOnMultiple(eventName, callback, maxCallbacks) {\n    return window.runtime.EventsOnMultiple(eventName, callback, maxCallbacks);\n}\n\nexport function EventsOn(eventName, callback) {\n    return EventsOnMultiple(eventName, callback, -1);\n}\n\nexport function EventsOff(eventName, ...additionalEventNames) {\n    return window.runtime.EventsOff(eventName, ...additionalEventNames);\n}\n\nexport function EventsOnce(eventName, callback) {\n    return EventsOnMultiple(eventName, callback, 1);\n}\n\nexport function EventsEmit(eventName) {\n    let args = [eventName].slice.call(arguments);\n    return window.runtime.EventsEmit.apply(null, args);\n}\n\nexport function WindowReload() {\n    window.runtime.WindowReload();\n}\n\nexport function WindowReloadApp() {\n    window.runtime.WindowReloadApp();\n}\n\nexport function WindowSetAlwaysOnTop(b) {\n    window.runtime.WindowSetAlwaysOnTop(b);\n}\n\nexport function WindowSetSystemDefaultTheme() {\n    window.runtime.WindowSetSystemDefaultTheme();\n}\n\nexport function WindowSetLightTheme() {\n    window.runtime.WindowSetLightTheme();\n}\n\nexport function WindowSetDarkTheme() {\n    window.runtime.WindowSetDarkTheme();\n}\n\nexport function WindowCenter() {\n    window.runtime.WindowCenter();\n}\n\nexport function WindowSetTitle(title) {\n    window.runtime.WindowSetTitle(title);\n}\n\nexport function WindowFullscreen() {\n    window.runtime.WindowFullscreen();\n}\n\nexport function WindowUnfullscreen() {\n    window.runtime.WindowUnfullscreen();\n}\n\nexport function WindowIsFullscreen() {\n    return window.runtime.WindowIsFullscreen();\n}\n\nexport function WindowGetSize() {\n    return window.runtime.WindowGetSize();\n}\n\nexport function WindowSetSize(width, height) {\n    window.runtime.WindowSetSize(width, height);\n}\n\nexport function WindowSetMaxSize(width, height) {\n    window.runtime.WindowSetMaxSize(width, height);\n}\n\nexport function WindowSetMinSize(width, height) {\n    window.runtime.WindowSetMinSize(width, height);\n}\n\nexport function WindowSetPosition(x, y) {\n    window.runtime.WindowSetPosition(x, y);\n}\n\nexport function WindowGetPosition() {\n    return window.runtime.WindowGetPosition();\n}\n\nexport function WindowHide() {\n    window.runtime.WindowHide();\n}\n\nexport function WindowShow() {\n    window.runtime.WindowShow();\n}\n\nexport function WindowMaximise() {\n    window.runtime.WindowMaximise();\n}\n\nexport function WindowToggleMaximise() {\n    window.runtime.WindowToggleMaximise();\n}\n\nexport function WindowUnmaximise() {\n    window.runtime.WindowUnmaximise();\n}\n\nexport function WindowIsMaximised() {\n    return window.runtime.WindowIsMaximised();\n}\n\nexport function WindowMinimise() {\n    window.runtime.WindowMinimise();\n}\n\nexport function WindowUnminimise() {\n    window.runtime.WindowUnminimise();\n}\n\nexport function WindowSetBackgroundColour(R, G, B, A) {\n    window.runtime.WindowSetBackgroundColour(R, G, B, A);\n}\n\nexport function ScreenGetAll() {\n    return window.runtime.ScreenGetAll();\n}\n\nexport function WindowIsMinimised() {\n    return window.runtime.WindowIsMinimised();\n}\n\nexport function WindowIsNormal() {\n    return window.runtime.WindowIsNormal();\n}\n\nexport function BrowserOpenURL(url) {\n    window.runtime.BrowserOpenURL(url);\n}\n\nexport function Environment() {\n    return window.runtime.Environment();\n}\n\nexport function Quit() {\n    window.runtime.Quit();\n}\n\nexport function Hide() {\n    window.runtime.Hide();\n}\n\nexport function Show() {\n    window.runtime.Show();\n}\n\nexport function ClipboardGetText() {\n    return window.runtime.ClipboardGetText();\n}\n\nexport function ClipboardSetText(text) {\n    return window.runtime.ClipboardSetText(text);\n}\n\n/**\n * Callback for OnFileDrop returns a slice of file path strings when a drop is finished.\n *\n * @export\n * @callback OnFileDropCallback\n * @param {number} x - x coordinate of the drop\n * @param {number} y - y coordinate of the drop\n * @param {string[]} paths - A list of file paths.\n */\n\n/**\n * OnFileDrop listens to drag and drop events and calls the callback with the coordinates of the drop and an array of path strings.\n *\n * @export\n * @param {OnFileDropCallback} callback - Callback for OnFileDrop returns a slice of file path strings when a drop is finished.\n * @param {boolean} [useDropTarget=true] - Only call the callback when the drop finished on an element that has the drop target style. (--wails-drop-target)\n */\nexport function OnFileDrop(callback, useDropTarget) {\n    return window.runtime.OnFileDrop(callback, useDropTarget);\n}\n\n/**\n * OnFileDropOff removes the drag and drop listeners and handlers.\n */\nexport function OnFileDropOff() {\n    return window.runtime.OnFileDropOff();\n}\n\nexport function CanResolveFilePaths() {\n    return window.runtime.CanResolveFilePaths();\n}\n\nexport function ResolveFilePaths(files) {\n    return window.runtime.ResolveFilePaths(files);\n}"
    },
    {
      "path": "internal/config/config.go",
      "content": "package config\n\nimport (\n\t\"encoding/json\"\n\t\"os\"\n\t\"path/filepath\"\n\t\"strings\"\n\t\"sync\"\n)\n\ntype Config struct {\n\tExclusions        []string `json:\"exclusions\"` // Folders/Files\n\tMasks             []string `json:\"masks\"`      // *.tmp, etc\n\tShowPassed        bool     `json:\"show_passed\"`\n\tAutoWatch         bool     `json:\"auto_watch\"`\n\tShowNotifications bool     `json:\"show_notifications\"`\n\tNotifyOnlyOnFailure bool    `json:\"notify_only_on_failure\"`\n\tAlwaysOnTop         bool    `json:\"always_on_top\"`\n\tAutoCopyErrors      bool    `json:\"auto_copy_errors\"`\n\tLang              string   `json:\"lang\"`       // \"ru\" or \"en\"\n}\n\nvar (\n\tcfg     *Config\n\tmu      sync.RWMutex\n\tcfgPath = \"go_test_runner.cfg\"\n)\n\nfunc Load() *Config {\n\tmu.Lock()\n\tdefer mu.Unlock()\n\n\tif cfg != nil {\n\t\treturn cfg\n\t}\n\n\tcfg = &Config{\n\t\tExclusions:          []string{\".git\", \"node_modules\", \"vendor\", \"frontend\"},\n\t\tShowPassed:          true,\n\t\tAutoWatch:           true,\n\t\tShowNotifications:   true,\n\t\tNotifyOnlyOnFailure: false,\n\t\tAlwaysOnTop:         false,\n\t\tAutoCopyErrors:      false,\n\t\tLang:                \"ru\",\n\t}\n\n\tdata, err := os.ReadFile(cfgPath)\n\tif err == nil {\n\t\t_ = json.Unmarshal(data, cfg)\n\t}\n\n\tif cfg.Lang == \"\" {\n\t\tcfg.Lang = \"ru\"\n\t}\n\treturn cfg\n}\n\nfunc Save(newCfg *Config) error {\n\tmu.Lock()\n\tdefer mu.Unlock()\n\tcfg = newCfg\n\treturn saveLocked(newCfg)\n}\n\nfunc saveLocked(c *Config) error {\n\tdata, _ := json.MarshalIndent(c, \"\", \"  \")\n\treturn os.WriteFile(cfgPath, data, 0644)\n}\n\nfunc (c *Config) IsExcluded(path string, root string) bool {\n\t// Normalize both to handle Windows drive casing\n\troot = strings.ToLower(filepath.ToSlash(root))\n\tpath = strings.ToLower(filepath.ToSlash(path))\n\n\trel, err := filepath.Rel(root, path)\n\tif err != nil {\n\t\treturn false\n\t}\n\tif rel == \".\" {\n\t\treturn false\n\t}\n\n\tcleanPath := filepath.ToSlash(rel)\n\tbase := filepath.Base(cleanPath)\n\n\tfor _, ex := range c.Exclusions {\n\t\tsegments := strings.Split(cleanPath, \"/\")\n\t\tfor _, s := range segments {\n\t\t\tif s == ex {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t}\n\t// Simple mask check (glob)\n\tfor _, mask := range c.Masks {\n\t\tmatch, _ := filepath.Match(mask, base)\n\t\tif match {\n\t\t\treturn true\n\t\t}\n\t}\n\treturn false\n}"
    },
    {
      "path": "internal/tester/tester.go",
      "content": "package tester\n\nimport (\n\t\"context\"\n\t\"os\"\n\t\"os/exec\"\n\t\"path/filepath\"\n\t\"strings\"\n\t\"syscall\"\n)\n\ntype TestResult struct {\n\tOutput  []string\n\tSuccess bool\n}\n\nfunc DiscoverTests(root string) ([]string, error) {\n\tvar packages []string\n\tset := make(map[string]bool)\n\n\terr := filepath.Walk(root, func(path string, info os.FileInfo, err error) error {\n\t\tif err != nil || info.IsDir() {\n\t\t\treturn nil\n\t\t}\n\t\tif strings.HasSuffix(info.Name(), \"_test.go\") {\n\t\t\tdir := filepath.Dir(path)\n\t\t\trel, _ := filepath.Rel(root, dir)\n\t\t\tif rel == \".\" {\n\t\t\t\tset[\"./\"] = true\n\t\t\t} else {\n\t\t\t\tset[\"./\"+filepath.ToSlash(rel)] = true\n\t\t\t}\n\t\t}\n\t\treturn nil\n\t})\n\n\tfor pkg := range set {\n\t\tpackages = append(packages, pkg)\n\t}\n\treturn packages, err\n}\n\nfunc RunTests(ctx context.Context, path string, showPassed bool, lang string) (string, error) {\n\tcmd := exec.CommandContext(ctx, \"go\", \"test\", \"-v\", \"./...\")\n\tcmd.Dir = path\n\t// Hide console window on Windows\n\tcmd.SysProcAttr = &syscall.SysProcAttr{\n\t\tHideWindow: true,\n\t}\n\n\t// Capture combined output to ensure we don't miss build errors\n\toutput, _ := cmd.CombinedOutput()\n\tlines := strings.Split(string(output), \"\\n\")\n\n\tvar passBlocks []string\n\tvar failBlocks []string\n\tvar currentBlock []string\n\n\tfor _, line := range lines {\n\t\ttrimmedLine := strings.TrimSpace(line)\n\t\tif trimmedLine == \"\" {\n\t\t\tcontinue\n\t\t}\n\t\tcurrentBlock = append(currentBlock, line)\n\t\n\t\t// Проверяем маркеры успеха: функциональные тесты или итог пакета\n\t\tisPass := strings.Contains(line, \"--- PASS\") || \n\t\t\tstrings.HasPrefix(trimmedLine, \"ok\\t\") || \n\t\t\tstrings.HasPrefix(trimmedLine, \"ok  \") ||\n\t\t\ttrimmedLine == \"PASS\"\n\t\n\t\t// Проверяем маркеры провала\n\t\tisFail := strings.Contains(line, \"--- FAIL\") || \n\t\t\tstrings.Contains(line, \"FAIL\\t\") || \n\t\t\tstrings.HasPrefix(trimmedLine, \"FAIL\")\n\t\n\t\tif isPass {\n\t\t\tpassBlocks = append(passBlocks, strings.Join(currentBlock, \"\\n\"))\n\t\t\tcurrentBlock = nil\n\t\t} else if isFail {\n\t\t\tfailBlocks = append(failBlocks, strings.Join(currentBlock, \"\\n\"))\n\t\t\tcurrentBlock = nil\n\t\t}\n\t}\n\n\t// Если остался текст, не привязанный к конкретным PASS/FAIL (например, ошибки компиляции)\n\tif len(currentBlock) > 0 {\n\t\tremaining := strings.TrimSpace(strings.Join(currentBlock, \"\\n\"))\n\t\tif remaining != \"\" {\n\t\t\t// Если в остатке есть явные признаки успеха, не кладем в ошибки\n\t\t\tif !strings.Contains(remaining, \"ok\\t\") && !strings.Contains(remaining, \"PASS\") {\n\t\t\t\tfailBlocks = append(failBlocks, remaining)\n\t\t\t} else {\n\t\t\t\tpassBlocks = append(passBlocks, remaining)\n\t\t\t}\n\t\t}\n\t}\n\n\tvar finalOutput strings.Builder\n\t\n\tlabels := map[string]map[string]string{\n\t\t\"ru\": {\"pass\": \"Успешные тесты:\", \"fail\": \"Ошибки в тестах:\", \"all_ok\": \"✅ Все тесты пройдены успешно!\", \"none\": \"ℹ️ Тесты не найдены или вывод пуст.\"},\n\t\t\"en\": {\"pass\": \"Successful tests:\", \"fail\": \"Errors in tests:\", \"all_ok\": \"✅ All tests passed successfully!\", \"none\": \"ℹ️ No tests found or output is empty.\"},\n\t}\n\tl := labels[lang]\n\tif l == nil { l = labels[\"en\"] }\n\t\n\tif len(passBlocks) > 0 && showPassed {\n\t\tfinalOutput.WriteString(l[\"pass\"] + \"\\n\")\n\t\tfor _, b := range passBlocks {\n\t\t\tfinalOutput.WriteString(b + \"\\n\")\n\t\t}\n\t\tfinalOutput.WriteString(\"\\n\")\n\t}\n\t\n\tif len(failBlocks) == 0 {\n\t\tif len(passBlocks) > 0 {\n\t\t\tfinalOutput.WriteString(l[\"all_ok\"] + \"\\n\")\n\t\t} else {\n\t\t\tfinalOutput.WriteString(l[\"none\"] + \"\\n\")\n\t\t}\n\t} else {\n\t\tfinalOutput.WriteString(l[\"fail\"] + \"\\n\\n\")\n\t\tfor _, b := range failBlocks {\n\t\t\tif strings.TrimSpace(b) != \"\" {\n\t\t\t\tfinalOutput.WriteString(b + \"\\n\")\n\t\t\t}\n\t\t}\n\t}\n\n\treturn finalOutput.String(), nil\n}"
    },
    {
      "path": "main.go",
      "content": "package main\n\nimport (\n\t\"embed\"\n\n\t\"github.com/wailsapp/wails/v2\"\n\t\"github.com/wailsapp/wails/v2/pkg/options\"\n\t\"github.com/wailsapp/wails/v2/pkg/options/assetserver\"\n)\n\n//go:embed all:frontend/dist\nvar assets embed.FS\n\nfunc main() {\n\tapp := NewApp()\n\n\terr := wails.Run(&options.App{\n\t\tTitle:  \"Go Test Runner\",\n\t\tWidth:  1024,\n\t\tHeight: 768,\n\t\tAssetServer: &assetserver.Options{\n\t\t\tAssets: assets,\n\t\t},\n\t\tBackgroundColour: &options.RGBA{R: 30, G: 30, B: 30, A: 1},\n\t\tOnStartup:        app.startup,\n\t\tOnDomReady:       app.onDomReady,\n\t\tBind: []interface{}{\n\t\t\tapp,\n\t\t},\n\t})\n\n\tif err != nil {\n\t\tprintln(\"Error:\", err.Error())\n\t}\n}"
    },
    {
      "path": "wails.json",
      "content": "{\n  \"name\": \"goruner\",\n  \"assetdir\": \"frontend/dist\",\n  \"reloadapp\": true,\n  \"version\": \"1.0.0\",\n  \"wailsjsdir\": \"frontend/wailsjs\",\n  \"frontend:install\": \"npm install\",\n  \"frontend:build\": \"npm run build\",\n  \"frontend:dev:watcher\": \"npm run dev\",\n  \"frontend:dev:serverUrl\": \"http://localhost:5173\",\n  \"author\": {\n    \"name\": \"Senior Developer\",\n    \"email\": \"dev@example.com\"\n  }\n}"
    }
  ]
}
